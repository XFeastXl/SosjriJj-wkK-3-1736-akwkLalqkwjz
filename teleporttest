                local ReplicatedStorage = game:GetService("ReplicatedStorage")
                local Players = game:GetService("Players")
                local Crypt = require(ReplicatedStorage:WaitForChild("Crypt"))

                local localPlayer = Players.LocalPlayer

                if not localPlayer then
                    return
                end

                local hotbarSlot = 1
                local meleeRemoteEvent =
                    ReplicatedStorage:WaitForChild("remoteInterface"):WaitForChild("interactions"):WaitForChild(
                    "meleePlayer"
                )
                local nearestPlayer = nil
                local nearestDistance = 40
                local AutoMeleeEnabled = false

                local function findNearestPlayer()
                    nearestPlayer = nil
                    local closestDistance = nearestDistance

                    for _, player in pairs(Players:GetPlayers()) do
                        if
                            player ~= localPlayer and player.Character and
                                player.Character:FindFirstChild("HumanoidRootPart")
                         then
                            local distance =
                                (localPlayer.Character.HumanoidRootPart.Position -
                                player.Character.HumanoidRootPart.Position).Magnitude
                            if distance < closestDistance then
                                closestDistance = distance
                                nearestPlayer = player
                            end
                        end
                    end
                end

                local function attackNearestPlayer()
                    if nearestPlayer then
                        local success, encrypted =
                            pcall(
                            function()
                                return Crypt.localencrypt(nearestPlayer.UserId)
                            end
                        )

                        if success and encrypted then
                            meleeRemoteEvent:FireServer(hotbarSlot, encrypted)
                        end
                    end
                end

                local function autoMelee()
                    while AutoMeleeEnabled do
                        findNearestPlayer()
                        attackNearestPlayer()
                        wait(0.25)
                    end
                end
